---
title: "Model Summaries"
---

```{r echo=FALSE, message=FALSE}
library(blavaan, quietly=TRUE)
```

Say that we specify a model of the Bollen political democracy data and draw posterior samples using the *blavaan* default settings:

```{r eval=FALSE}
  model <- ' 
    # latent variable definitions
    ind60 =~ x1 + x2 + x3
    dem60 =~ y1 + a*y2 + b*y3 + c*y4
    dem65 =~ y5 + a*y6 + b*y7 + c*y8
     
    # regressions
    dem60 ~ ind60
    dem65 ~ ind60 + dem60
     
    # residual correlations
    y1 ~~ y5
    y2 ~~ y4 + y6
    y3 ~~ y7
    y4 ~~ y8
    y6 ~~ y8
  '

fit <- bsem(model, data=PoliticalDemocracy)
```

We describe here how to summarize the fitted model.



### Convergence
Following model estimation, we immediately wish to look at the "goodness" of the posterior samples, including convergence to a stationary distribution and autocorrelation. Popular metrics for studying these issues are available via the `summary()` and `plot()` functions. The Rhat metric and effective sample size statistic are available via `summary()`:

```{r eval=FALSE}
summary(fit, neff=TRUE)
```

while a variety of plots are also available. We demonstrate time series plots and autocorrelation functions below; the options for `plot.type` come from the bayesplot package. For plotting functions in bayesplot that begin with `mcmc_`, the `plot.type` here would be the rest of the function name (without the leading `mcmc_`).

```{r eval=FALSE}
plot(fit, pars=1:4, plot.type="trace")
plot(fit, pars=1:4, plot.type="acf")
```

These commands specify that we should draw a time series plot and an autocorrelation plot for the first four free parameters, as listed in `coef(fit)`.

If the model has definitely not converged (as judged by Rhat), blavaan will issue multiple warnings. Lack of convergence is sometimes caused by bad initial values (by default, blavaan generates random initial values), so it is occasionally helpful to re-estimate the model a second time. Otherwise, lack of convergence may imply prior distributions that severely conflict with the data, or an ill-defined model. It is sometimes helpful to try to fit the same model in *lavaan*, to observe the types of errors that occur there.
